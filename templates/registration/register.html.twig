{% extends 'base.html.twig' %}

{% block title %}Register{% endblock %}

{% block body %}
    <h1>Register</h1>

    {{ form_errors(registrationForm) }}

    {{ form_start(registrationForm, {'attr': {'enctype': 'multipart/form-data'}}) }}
        {{ form_row(registrationForm.nom) }}
        {{ form_row(registrationForm.prenom) }}
        {{ form_row(registrationForm.sexe) }}
        {{ form_row(registrationForm.adresse) }}
        {{ form_row(registrationForm.age) }}
        {{ form_row(registrationForm.telephone) }}
        {{ form_row(registrationForm.email) }}
        {{ form_row(registrationForm.plainPassword, {
            label: 'Password'
        }) }}
        {{ form_row(registrationForm.role) }}
        {{ form_row(registrationForm.imageProfil) }}

        <div id="medecin-fields" style="display: none;">
            {{ form_row(registrationForm.specialite) }}
            {{ form_row(registrationForm.certificat) }}
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                var roleField = document.getElementById('registration_form_role');
                var medecinFields = document.getElementById('medecin-fields');

                function toggleMedecinFields() {
                    if (roleField.value === 'medecin') {
                        medecinFields.style.display = 'block';
                    } else {
                        medecinFields.style.display = 'none';
                    }
                }

                roleField.addEventListener('change', toggleMedecinFields);
                toggleMedecinFields(); // Initial check
            });
        </script>
        <button type="submit" class="btn">Register</button>
    {{ form_end(registrationForm) }}
{% endblock %}